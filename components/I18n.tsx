import React, { createContext, useContext, useEffect, useMemo, useState } from 'react';
import AsyncStorage from '@react-native-async-storage/async-storage';

type Locale = 'en' | 'id';
type Dict = Record<string, string>;

const resources: Record<Locale, Dict> = {
  en: {
    about_title: 'About This App',
    check_update: 'Check for Update',
    checking: 'Checking…',
    privacy_policy: 'Privacy Policy',
    terms: 'Terms of Service',
    support: 'Support',
    rate_app: 'Rate App',
    appearance: 'Appearance',
    language: 'Language',
    system: 'System',
    light: 'Light',
    dark: 'Dark',
    english: 'English',
    bahasa: 'Bahasa',
    // global labels
    profile: 'Profile',
    clicker: 'Clicker',
    about: 'About',
    users_manager: 'Users Manager',
    projects: 'Projects',
    outlets: 'Outlets',
    tasks: 'Tasks',
    menu: 'Menu',
    logout: 'Logout',
    // new
    app_settings: 'App Settings',
    attendance: 'Attendance',
    assessment: 'Assessment',
    quick_quiz: 'Quick Quiz',
    sales_report: 'Sales Report',
    sales_detail: 'Sales Detail',
    provinces: 'Provinces',
    cities: 'Cities',
    activation: 'Activation',
    projects_list: 'Projects List',
    admin_requests: 'Admin Requests',
    user_mgmt: 'User Mgmt',
  // profile
  login_required: 'Please log in to see your profile.',
  go_to_login: 'Go to Login',
  request_role: 'Request Role',
  role_request: 'Role Request',
  requested: 'Requested',
  reason: 'Reason',
  edit_profile: 'Edit Profile',
  personal_info: 'Personal Info',
  first_name: 'First Name',
  last_name: 'Last Name',
  phone: 'Phone',
  email: 'Email',
  request_new_role: 'Request New Role',
  select_role: 'Select Role',
  select_role_placeholder: 'Select a role...',
  role_reason_placeholder: 'Why do you need this role?',
  submit: 'Submit',
  cancel: 'Cancel',
  update: 'Update',
  invalid_phone: 'Invalid Phone',
  invalid_phone_msg: 'Please enter a valid Indonesian phone number, e.g. 81234567890',
  error: 'Error',
  select_role_error: 'Please select a role to request.',
  request_sent: 'Request Sent',
  request_submitted: 'Your request for a new role has been submitted.',
  province: 'Province',
  city: 'City',
  phone_id: 'Phone (Indonesia)',
  // clicker
  clicker_settings: 'Clicker Setting',
  haptics: 'Haptics',
  step: 'Step',
  share: 'Share',
  import: 'Import',
  export: 'Export',
  copy: 'Copy',
  clear: 'Clear',
  ok: 'OK',
  add_failed: 'Add Failed',
  update_failed: 'Update Failed',
  failed_to_update_status: 'Failed to update status',
  delete_report: 'Delete Report',
  are_you_sure: 'Are you sure?',
  upload_failed: 'Upload Failed',
  authentication_error: 'Authentication Error',
  permission_denied: 'Permission denied',
  location_permission_denied: 'Permission to access location was denied',
  confirm_check_in: 'Confirm Check-In',
  confirm_check_in_msg: 'Are you sure you want to check in now?',
  confirm_check_out: 'Confirm Check-Out',
  confirm_check_out_msg: 'Are you sure you want to check out now?',
  cancelled: 'Cancelled',
  image_selection_cancelled: 'Image selection was cancelled.',
  must_be_logged_in_to_upload_images: 'You must be logged in to upload images.',
  photo_uploaded_success: 'Selfie uploaded and saved.',
  selfie_post_upload_warning: 'Please ensure your face is clearly visible. If needed, re-upload before approval.',
  failed_to_fetch_attendances: 'Failed to fetch attendances.',
  attendance_updated: 'Attendance record updated successfully.',
  delete_attendance: 'Delete Attendance',
  confirm_delete_attendance: 'Are you sure you want to delete this record?',
  attendance_approved_by_tl: 'Attendance approved by TL.',
  attendance_approved_by_am: 'Attendance approved by Area Manager.',
  failed_to_fetch_assessments: 'Failed to fetch assessments.',
  delete_assessment: 'Delete Assessment',
  failed_to_save_report: 'Failed to save report',
  failed_to_fetch_reports: 'Failed to fetch reports',
  duplicate: 'Duplicate',
  var_exists: 'A variable with that name already exists.',
  duplicate_name: 'Another variable already has that name.',
  reset_counters: 'Reset counters',
  reset_counters_msg: 'This will clear all variables and restore defaults. Continue?',
  delete_variable: 'Delete variable',
  reset_counter: 'Reset counter',
  reset_counter_msg_prefix: 'Reset',
  clear_counts: 'Clear counts',
  clear_counts_msg: 'Set all counts to zero? Your variables will be kept.',
  copied_to_clipboard: 'Copied to clipboard',
  exported: 'Exported',
  export_failed: 'Export failed',
  export_json_copied: 'Clicker data copied to clipboard as JSON.',
  imported: 'Imported',
  import_failed: 'Import failed',
  invalid_clicker_json: 'Clipboard does not contain valid Clicker JSON.',
  remove: 'Remove',
  rename: 'Rename',
  increment: 'Increment',
  reorder: 'Reorder',
  loaded: 'Loaded',
  variables: 'variables',
  from_json: 'from JSON',
    
  rename_variable: 'Rename variable',
  new_name: 'New name',
  new_variable: 'New variable...',
  // subtitles
  outlets_subtitle: 'View outlet details and status',
  provinces_subtitle: 'View and manage province list',
  cities_subtitle: 'View and manage city list',
  projects_overview_subtitle: 'View project details and status',
  activation_subtitle: 'View and manage activation requests',
  user_mgmt_subtitle: 'Manage user accounts and permissions',
  team_mgmt: 'Team Management',
  team_mgmt_subtitle: 'Area Managers, Iris TLs & BAs by Province',
  admin_requests_subtitle: 'Take or review role requests',
  add_project: 'Add New Project',
  activation_name: 'Activation Name',
  project_name: 'Project Name',
  project_type: 'Project Type',
  project_tier: 'Project Tier',
  add: 'Add',
  edit_project: 'Edit Project',
  creator: 'Creator',
  view_audit: 'View Audit',
  edit: 'Edit',
  delete: 'Delete',
  // filters & common
  oldest: 'Oldest',
  newest: 'Newest',
  reset: 'Reset',
  filters: 'Filters',
  filters_on: 'Filters • On',
  search: 'Search',
  status: 'Status',
  apply: 'Apply',
  // extra
  quick_sales_report: 'Quick Sales Report',
  task_management: 'Task Management',
  take_quiz: 'Take Quiz',
  approve: 'Approve',
  deny: 'Deny',
  history: 'History',
  search_outlet_or_id: 'Search outlet or ID',
  search_outlet_or_task: 'Search by outlet or task ID',
  // analytics/history
  timeframe: 'Timeframe',
  last_3_months: 'Last 3 months',
  last_6_months: 'Last 6 months',
  last_12_months: 'Last 12 months',
  qr: 'QR',
  srd: 'SRD',
  total: 'Total',
  avg_per_report: 'Avg per report',
  guinness_selling: 'Guinness Selling',
  srd_group: 'SRD Group',
  metric: 'Metric',
  stocks: 'Stocks',
  quick_sales_report_monthly: 'Quick Sales Report (Monthly)',
  sales_report_detail_monthly: 'Sales Report Detail (Monthly)',
  early_assessment_monthly: 'Early Assessment (Monthly)',
  attendance_monthly: 'Attendance (Monthly)',
  outlet_history: 'Outlet History',
  team_history: 'Team History',
  // tasks menu/labels
  task_detail: 'Task Detail',
  task_detail_subtitle: 'View and manage task details',
  quick_quiz_subtitle: 'Take or review quick quizzes',
  attendance_subtitle: 'Check in/out and manage attendance',
  assessment_subtitle: 'Complete early assessment tasks',
  quick_sales_report_subtitle: 'View and manage Sales Report',
  sales_detail_subtitle: 'View and manage Sales Report Detailed',
  select_outlet: 'Select an Outlet',
  select_ba: 'Select BA',
  select_tl: 'Select TL',
  task_start_date: 'Task Start Date',
  remark: 'Remark',
  yes: 'Yes',
  no: 'No',
  // details modals
  shift: 'Shift',
  check_in_time: 'Check-in Time',
  check_out_time: 'Check-out Time',
  check_in_location: 'Check-in Location',
  check_out_location: 'Check-out Location',
  photos: 'Photos',
  check_in_photo: 'Check-in Photo',
  check_out_photo: 'Check-out Photo',
  notes: 'Notes',
  type: 'Type',
  availability_stock_expiry: 'Availability / Stock / Expiry',
  kegs_available: 'KEGS Available',
  stock_kegs: 'Stock Kegs',
  expiry_kegs: 'Expiry Kegs',
  microdraught_available: 'Microdraught Available',
  stock_microdraught: 'Stock Microdraught',
  expiry_microdraught: 'Expiry Microdraught',
  gdic_available: 'GDIC Available',
  stock_gdic: 'Stock GDIC',
  expiry_gdic: 'Expiry GDIC',
  smooth_available: 'Smooth Available',
  stock_smooth_pint_330: 'Stock Smooth Pint 330',
  expiry_smooth_pint_330: 'Expiry Smooth Pint 330',
  stock_smooth_can_330: 'Stock Smooth Can 330',
  expiry_smooth_can_330: 'Expiry Smooth Can 330',
  gfes_available: 'GFES Available',
  stock_gfes_pint_330: 'Stock GFES Pint 330',
  expiry_gfes_pint_330: 'Expiry GFES Pint 330',
  stock_gfes_can_330: 'Stock GFES Can 330',
  expiry_gfes_can_330: 'Expiry GFES Can 330',
  stock_gfes_620: 'Stock GFES 620',
  expiry_gfes_620: 'Expiry GFES 620',
  stock_gfes_can_big_500: 'Stock GFES Can Big 500',
  expiry_gfes_can_big_500: 'Expiry GFES Can Big 500',
  activity_compliance: 'Activity / Compliance',
  activity_stoutie_running: 'Activity Stoutie Running',
  activity_stoutie_result: 'Activity Stoutie Result',
  daily_quiz_completed: 'Daily Quiz Completed',
  roleplay_video_made: 'Roleplay Video Made',
  pg_appearance_standard: 'PG Appearance Standard',
  visual_merchandising: 'Visual Merchandising',
  visibility_available: 'Visibility Available',
  outlet_visibility_description: 'Outlet Visibility Description',
  posm_available: 'POSM Available',
  posm_description: 'POSM Description',
  merchandise_available: 'Merchandise Available',
  merchandise_description: 'Merchandise Description',
  promotions_engagement: 'Promotions & Engagement',
  guinness_promotions_available: 'Guinness Promotions Available',
  promotion_description: 'Promotion Description',
  guinness_promotion_displayed: 'Guinness Promotion Displayed',
  guinness_promotion_displayed_description: 'Guinness Promotion Displayed Description',
  digital_activity_engagement: 'Digital Activity Engagement',
  digital_activity_engagement_description: 'Digital Activity Engagement Description',
  issues_notes: 'Issues / Notes',
  // quick sales modal
  no_data: 'No data',
  personnel: 'Personnel',
  assigned_ba: 'Assigned BA',
  assigned_tl: 'Assigned TL',
  outlet_venue: 'Outlet / Venue',
  outlet_id: 'Outlet ID',
  outlet: 'Outlet',
  tier: 'Tier',
  date: 'Date',
  restock: 'Restock',
  product_restock: 'Product Restock',
  restock_description: 'Restock Description',
  copy_md: 'Copy MD',
  close: 'Close',
  // user management / admin
  unknown_user: 'Unknown User',
  current_role: 'Current Role',
  created: 'Created',
  success: 'Success',
  access_denied: 'Access denied',
  no_permission: "You don't have permission to view this page.",
  edit_user: 'Edit User',
  role: 'Role',
  user: 'User',
  // audit logs
  audit_logs: 'Audit Logs',
  last_7_days: 'Last 7 days',
  last_30_days: 'Last 30 days',
  last_90_days: 'Last 90 days',
  refresh: 'Refresh',
  copy_csv: 'Copy CSV',
  all: 'All',
  all_actions: 'All actions',
  filter_by_actor: 'Filter by actor (id, name, or email)',
  filter_by_docid: 'Filter by docId',
  by: 'By',
  changed: 'Changed',
  load_more: 'Load more',
  admins_only: 'Admins only.',
  your_role: 'Your role',
  unknown: 'unknown',
  copied: 'Copied',
  copy_failed: 'Copy failed',
  review_for_area_manager: 'Review for Area Manager',
  description: 'Description',
  personnel_information: 'Personnel Information',
  assigned_to_ba: 'Assigned to BA',
  assigned_to_tl: 'Assigned to TL',
  ba_count: 'BA Count',
  crew_canvasser_count: 'Crew Canvasser Count',
  team_leader_name: 'Team Leader Name',
  spg_name: 'SPG Name',
  sales_report_detail_status: 'Sales Report Detail Status',
  created_at: 'Created At',
  created_by: 'Created By',
  outlet_information: 'Outlet Information',
  outlet_name: 'Outlet Name',
  activity_name: 'Activity Name',
  outlet_venue_name: 'Outlet Venue Name',
  capacity: 'Capacity',
  outlet_event_pic: 'Outlet Event PIC',
  guinness_selling_data: 'Guinness Selling Data',
  sampling_data: 'Sampling Data',
  sampling_available: 'Sampling available',
  call_and_customer_data: 'Call and Customer Data',
  selling_data_aggregates: 'Selling Data (Aggregates)',
  guinness_promotional_activities: 'Guinness Promotional Activities',
  visitor_consumer_data: 'Visitor and Consumer Data',
  tables_data: 'Tables Data',
  competitor_sales: 'Competitor Sales',
  competitor_activity_description: 'Competitor Activity Description',
  competitor_activity_spg_total: 'Competitor Activity SPG Total',
  merchandise_data: 'Merchandise Data',
  merchandise_distributed: 'Merchandise Distributed',
  weather_data: 'Weather Data',
  programs_digital_activity: 'Programs and Digital Activity',
  bali_specific_data: 'Bali Specific Data',
  ams_data: 'AMS Data',
  srd_summary_notes_learning: 'Sales Report Summary Notes and Learning',
  copy_all: 'Copy All',
  done_by_am: 'Done by AM',
  program_participation: 'Program Participation',
  call_reach: 'Call Reach',
  packet_sold: 'Packet Sold',
  engaged_people: 'Engaged People',
  sold: 'Sold',
  learning_points: 'Learning Points',
  weather_status: 'Weather Status',
  sunny: 'Sunny',
  cloudy: 'Cloudy',
  rainy: 'Rainy',
  // outlets screen additions
  failed_to_fetch_outlets: 'Failed to fetch outlets.',
  address: 'Address',
  contact: 'Contact',
  social: 'Social',
  coords: 'Coords',
  select_channel: 'Select Channel',
  select_tier: 'Select Tier',
  complete_address: 'Complete Address',
  contact_number: 'Contact Number',
  pic_name: 'PIC Name',
  pic_contact_number: 'PIC Contact Number',
  social_media: 'Social Media',
  capacity_person: 'Capacity (Person)',
  tables_available: 'No. of Tables Available (tables)',
  get_current_location: 'Get Current Location',
  latitude: 'Latitude',
  longitude: 'Longitude',
  regency: 'Regency',
  select_province: 'Select a Province',
  select_city_regency: 'Select City/Regency',
  failed_to_fetch_cities: 'Failed to fetch cities.',
  cities_cleared: 'All cities have been cleared.',
  failed_to_clear_cities: 'Failed to clear cities.',
  already_populated: 'Already Populated',
  cities_already_populated: 'The cities collection already contains data.',
  cities_populated: 'All cities and regencies have been added to the database.',
  failed_to_populate_cities: 'Failed to populate cities.',
  no_cities_for_province: 'No cities found for this province.',
  select_province_to_view_cities: 'Please select a province to view the list of cities.',
  invalid_name: 'Invalid Name',
  cannot_be_empty: 'cannot be empty.',
  failed_to_add_province: 'Failed to add province.',
  // auth/login/signup
  missing_info: 'Missing Info',
  enter_email_password: 'Please enter email and password.',
  login_failed: 'Login Failed',
  welcome_back: 'Welcome Back',
  sign_in_continue: 'Sign in to continue',
  password: 'Password',
  password_placeholder: '••••••••',
  login: 'Login',
  no_account: "Don't have an account?",
  sign_up: 'Sign Up',
  create_account: 'CREATE ACCOUNT',
  get_started: 'Get Started',
  fill_information_below: 'Fill in the information below',
  first_name_placeholder: 'John',
  last_name_placeholder: 'Doe',
  phone_indonesia: 'Phone (Indonesia)',
  phone_placeholder: '81234567890',
  phone_format_hint: 'Format: +6281234567890',
  create_password: 'Create a password',
  repeat_password: 'Repeat password',
  passwords_do_not_match: 'Passwords do not match',
  missing_fields: 'Missing Fields',
  first_last_phone_required: 'First Name, Last Name, and Phone are required.',
  password_required: 'Password Required',
  enter_password: 'Please enter a password.',
  enter_valid_phone: 'Please enter a valid Indonesian phone number, e.g. 81234567890',
  signup_failed: 'Sign Up Failed',
  failed_create_user_data: 'Failed to create user data.',
  create_account_cta: 'Create Account',
  already_have_account: 'Already have an account?',
  // not found
  oops: 'Oops!',
  screen_not_exist: "This screen doesn't exist.",
  go_home: 'Go to home screen!'
  ,
  // about/updates
  app_version: 'App Version',
  build: 'Build',
  channel: 'Channel',
  runtime: 'Runtime',
  update_id: 'Update ID',
  unable_open_link: 'Unable to open link',
  update_ready: 'Update Ready',
  app_reload_apply: 'App will reload to apply the latest update.',
  reload: 'Reload',
  up_to_date: 'Up-to-date',
  latest_version: 'You have the latest version.',
  update_check_failed: 'Update Check Failed',
  // team management
  team_management: 'Team Management',
  name: 'Name',
  no_team_members: 'No team members found.',
  // added keys for modals and admin flows
  admin_next_status: 'Admin: Next Status',
  no_change: '(no change)',
  quiz_results: 'Quiz Results',
  question_x_of_y: 'Question {x} of {y}',
  quiz_complete: 'Quiz Complete!',
  your_score: 'Your Score',
  quiz_questions: 'Quiz Questions',
  quiz_question: 'Quiz Question',
  question: 'Question',
  option: 'Option',
  answer: 'Answer',
  answer_abcd: 'Answer (A/B/C/D)',
  result: 'Result',
  task_id: 'Task ID',
  quiz_label: 'Quiz',
  user_id: 'User ID',
  quiz_id: 'Quiz ID',
  quiz_date_hint: 'Quiz Date (YYYY-MM-DD)',
  quick_quiz_result: 'Quiz Result',
  add_quiz_record: 'Add Quiz Record',
  edit_quiz_record: 'Edit Quiz Record',
  status_admin: 'Status (Admin)',
  qr_status: 'Task Quick Sales Report Status',
  restock_information: 'Restock Information',
  product_restock_question: 'Product Restock?',
  qr_review_by_am: 'QR Review by AM',
  confirm_qr_review_by_am: 'Confirm QR Review by AM',
  status_updated_to_qr_review_by_am: 'Status updated to QR Review by AM.',
  review_back_to_tl: 'Review back to TL',
  status_updated_to_review_back_to_tl: 'Status updated to Review back to TL.',
  reassess_by_tl: 'REASSESS by TL',
  confirm_reassess: 'Confirm Reassess',
  confirm_reassess_msg: 'Reassign to TL? Status will be set to RE ASSESS BY TL.',
  status_updated_to_reassess_tl: 'Status updated to RE ASSESS BY TL.'
  },
  id: {
    about_title: 'Tentang Aplikasi Ini',
    check_update: 'Periksa Pembaruan',
    checking: 'Memeriksa…',
    privacy_policy: 'Kebijakan Privasi',
    terms: 'Syarat Layanan',
    support: 'Dukungan',
    rate_app: 'Beri Nilai Aplikasi',
    appearance: 'Tampilan',
    language: 'Bahasa',
    system: 'Sistem',
    light: 'Terang',
    dark: 'Gelap',
    english: 'Inggris',
    bahasa: 'Bahasa',
    // global labels
    profile: 'Profil',
    clicker: 'Clicker',
    about: 'Tentang',
    users_manager: 'Manajer Pengguna',
    projects: 'Proyek',
    outlets: 'Outlet',
    tasks: 'Tugas',
    menu: 'Menu',
    logout: 'Keluar',
    // new
    app_settings: 'Pengaturan Aplikasi',
    attendance: 'Kehadiran',
    assessment: 'Penilaian',
    quick_quiz: 'Kuis Cepat',
    sales_report: 'Laporan Penjualan',
    sales_detail: 'Detail Penjualan',
    provinces: 'Provinsi',
    cities: 'Kota',
    activation: 'Aktivasi',
    projects_list: 'Daftar Proyek',
    admin_requests: 'Permintaan Admin',
    user_mgmt: 'Manajemen Pengguna',
  // profile
  login_required: 'Silakan masuk untuk melihat profil Anda.',
  go_to_login: 'Masuk',
  request_role: 'Minta Peran',
  role_request: 'Permintaan Peran',
  requested: 'Diminta',
  reason: 'Alasan',
  edit_profile: 'Ubah Profil',
  personal_info: 'Informasi Pribadi',
  first_name: 'Nama Depan',
  last_name: 'Nama Belakang',
  phone: 'Telepon',
  email: 'Email',
  request_new_role: 'Minta Peran Baru',
  select_role: 'Pilih Peran',
  select_role_placeholder: 'Pilih peran...',
  role_reason_placeholder: 'Mengapa Anda membutuhkan peran ini?',
  submit: 'Kirim',
  cancel: 'Batal',
  update: 'Perbarui',
  invalid_phone: 'Nomor Tidak Valid',
  invalid_phone_msg: 'Masukkan nomor telepon Indonesia yang valid, mis. 81234567890',
  error: 'Kesalahan',
  select_role_error: 'Silakan pilih peran yang diminta.',
  request_sent: 'Permintaan Terkirim',
  request_submitted: 'Permintaan peran baru Anda telah dikirim.',
  province: 'Provinsi',
  city: 'Kota',
  phone_id: 'Telepon (Indonesia)',
  // clicker
  clicker_settings: 'Pengaturan Clicker',
  haptics: 'Getar',
  step: 'Langkah',
  share: 'Bagikan',
  import: 'Impor',
  export: 'Ekspor',
  copy: 'Salin',
  clear: 'Bersihkan',
  ok: 'OK',
  add_failed: 'Gagal Menambah',
  update_failed: 'Gagal Memperbarui',
  failed_to_update_status: 'Gagal memperbarui status',
  delete_report: 'Hapus Laporan',
  are_you_sure: 'Anda yakin?',
  upload_failed: 'Gagal Mengunggah',
  authentication_error: 'Kesalahan Otentikasi',
  permission_denied: 'Izin ditolak',
  location_permission_denied: 'Izin untuk mengakses lokasi ditolak',
  confirm_check_in: 'Konfirmasi Check-In',
  confirm_check_in_msg: 'Apakah Anda yakin ingin check-in sekarang?',
  confirm_check_out: 'Konfirmasi Check-Out',
  confirm_check_out_msg: 'Apakah Anda yakin ingin check-out sekarang?',
  cancelled: 'Dibatalkan',
  image_selection_cancelled: 'Pemilihan gambar dibatalkan.',
  must_be_logged_in_to_upload_images: 'Anda harus masuk untuk mengunggah gambar.',
  photo_uploaded_success: 'Selfie berhasil diunggah dan disimpan.',
  selfie_post_upload_warning: 'Mohon pastikan wajah terlihat jelas. Jika perlu, unggah ulang sebelum disetujui.',
  failed_to_fetch_attendances: 'Gagal mengambil data kehadiran.',
  attendance_updated: 'Data kehadiran berhasil diperbarui.',
  delete_attendance: 'Hapus Kehadiran',
  confirm_delete_attendance: 'Yakin ingin menghapus data ini?',
  attendance_approved_by_tl: 'Kehadiran disetujui oleh TL.',
  attendance_approved_by_am: 'Kehadiran disetujui oleh Area Manager.',
  failed_to_fetch_assessments: 'Gagal mengambil penilaian.',
  delete_assessment: 'Hapus Penilaian',
  failed_to_save_report: 'Gagal menyimpan laporan',
  failed_to_fetch_reports: 'Gagal mengambil laporan',
  duplicate: 'Duplikat',
  var_exists: 'Variabel dengan nama itu sudah ada.',
  duplicate_name: 'Variabel lain sudah memiliki nama itu.',
  reset_counters: 'Atur ulang penghitung',
  reset_counters_msg: 'Ini akan menghapus semua variabel dan mengembalikan default. Lanjutkan?',
  delete_variable: 'Hapus variabel',
  reset_counter: 'Atur ulang penghitung',
  reset_counter_msg_prefix: 'Atur ulang',
  clear_counts: 'Bersihkan hitungan',
  clear_counts_msg: 'Setel semua hitungan ke nol? Variabel Anda akan tetap ada.',
  copied_to_clipboard: 'Disalin ke papan klip',
  exported: 'Diekspor',
  export_failed: 'Gagal mengekspor',
  export_json_copied: 'Data Clicker disalin ke papan klip sebagai JSON.',
  imported: 'Diimpor',
  import_failed: 'Gagal mengimpor',
  invalid_clicker_json: 'Papan klip tidak berisi JSON Clicker yang valid.',
  remove: 'Hapus',
  rename: 'Ganti nama',
  increment: 'Tambah',
  reorder: 'Urutkan ulang',
  loaded: 'Dimuat',
  variables: 'variabel',
  from_json: 'dari JSON',
    
  rename_variable: 'Ganti nama variabel',
  new_name: 'Nama baru',
  new_variable: 'Variabel baru...',
  // subtitles
  outlets_subtitle: 'Lihat detail dan status outlet',
  provinces_subtitle: 'Lihat dan kelola daftar provinsi',
  cities_subtitle: 'Lihat dan kelola daftar kota',
  projects_overview_subtitle: 'Lihat detail dan status proyek',
  activation_subtitle: 'Lihat dan kelola permintaan aktivasi',
  user_mgmt_subtitle: 'Kelola akun pengguna dan perizinan',
  team_mgmt: 'Manajemen Tim',
  team_mgmt_subtitle: 'Area Manager, Iris TL & BA per Provinsi',
  admin_requests_subtitle: 'Terima atau tinjau permintaan peran',
  add_project: 'Tambah Proyek Baru',
  activation_name: 'Nama Aktivasi',
  project_name: 'Nama Proyek',
  project_type: 'Jenis Proyek',
  project_tier: 'Tingkat Proyek',
  add: 'Tambah',
  edit_project: 'Ubah Proyek',
  creator: 'Pembuat',
  view_audit: 'Lihat Audit',
  edit: 'Ubah',
  delete: 'Hapus',
  // filters & common
  oldest: 'Terlama',
  newest: 'Terbaru',
  reset: 'Atur Ulang',
  filters: 'Filter',
  filters_on: 'Filter • Aktif',
  search: 'Cari',
  status: 'Status',
  apply: 'Terapkan',
  // extra
  quick_sales_report: 'Laporan Penjualan Cepat',
  task_management: 'Manajemen Tugas',
  take_quiz: 'Ambil Kuis',
  approve: 'Setujui',
  deny: 'Tolak',
  history: 'Riwayat',
  search_outlet_or_id: 'Cari outlet atau ID',
  search_outlet_or_task: 'Cari berdasarkan outlet atau ID tugas',
  // analytics/history
  timeframe: 'Rentang waktu',
  last_3_months: '3 bulan terakhir',
  last_6_months: '6 bulan terakhir',
  last_12_months: '12 bulan terakhir',
  qr: 'QR',
  srd: 'SRD',
  total: 'Total',
  avg_per_report: 'Rata per laporan',
  guinness_selling: 'Penjualan Guinness',
  srd_group: 'Grup SRD',
  metric: 'Metrik',
  stocks: 'Stok',
  quick_sales_report_monthly: 'Laporan Penjualan Cepat (Bulanan)',
  sales_report_detail_monthly: 'Detail Laporan Penjualan (Bulanan)',
  early_assessment_monthly: 'Penilaian Awal (Bulanan)',
  attendance_monthly: 'Kehadiran (Bulanan)',
  outlet_history: 'Riwayat Outlet',
  team_history: 'Riwayat Tim',
  // tasks menu/labels
  task_detail: 'Detail Tugas',
  task_detail_subtitle: 'Lihat dan kelola detail tugas',
  quick_quiz_subtitle: 'Ikuti atau tinjau kuis cepat',
  attendance_subtitle: 'Check-in/out dan kelola kehadiran',
  assessment_subtitle: 'Selesaikan tugas penilaian awal',
  quick_sales_report_subtitle: 'Lihat dan kelola Laporan Penjualan',
  sales_detail_subtitle: 'Lihat dan kelola Detail Laporan Penjualan',
  select_outlet: 'Pilih Outlet',
  select_ba: 'Pilih BA',
  select_tl: 'Pilih TL',
  task_start_date: 'Tanggal Mulai Tugas',
  remark: 'Catatan',
  yes: 'Ya',
  no: 'Tidak',
  // details modals
  shift: 'Shift',
  check_in_time: 'Waktu Check-in',
  check_out_time: 'Waktu Check-out',
  check_in_location: 'Lokasi Check-in',
  check_out_location: 'Lokasi Check-out',
  photos: 'Foto',
  check_in_photo: 'Foto Check-in',
  check_out_photo: 'Foto Check-out',
  notes: 'Catatan',
  type: 'Tipe',
  availability_stock_expiry: 'Ketersediaan / Stok / Kedaluwarsa',
  kegs_available: 'KEGS Tersedia',
  stock_kegs: 'Stok KEGS',
  expiry_kegs: 'Kedaluwarsa KEGS',
  microdraught_available: 'Microdraught Tersedia',
  stock_microdraught: 'Stok Microdraught',
  expiry_microdraught: 'Kedaluwarsa Microdraught',
  gdic_available: 'GDIC Tersedia',
  stock_gdic: 'Stok GDIC',
  expiry_gdic: 'Kedaluwarsa GDIC',
  smooth_available: 'Smooth Tersedia',
  stock_smooth_pint_330: 'Stok Smooth Pint 330',
  expiry_smooth_pint_330: 'Kedaluwarsa Smooth Pint 330',
  stock_smooth_can_330: 'Stok Smooth Can 330',
  expiry_smooth_can_330: 'Kedaluwarsa Smooth Can 330',
  gfes_available: 'GFES Tersedia',
  stock_gfes_pint_330: 'Stok GFES Pint 330',
  expiry_gfes_pint_330: 'Kedaluwarsa GFES Pint 330',
  stock_gfes_can_330: 'Stok GFES Can 330',
  expiry_gfes_can_330: 'Kedaluwarsa GFES Can 330',
  stock_gfes_620: 'Stok GFES 620',
  expiry_gfes_620: 'Kedaluwarsa GFES 620',
  stock_gfes_can_big_500: 'Stok GFES Can Big 500',
  expiry_gfes_can_big_500: 'Kedaluwarsa GFES Can Big 500',
  activity_compliance: 'Aktivitas / Kepatuhan',
  activity_stoutie_running: 'Aktivitas Stoutie Berjalan',
  activity_stoutie_result: 'Hasil Aktivitas Stoutie',
  daily_quiz_completed: 'Kuis Harian Selesai',
  roleplay_video_made: 'Video Roleplay Dibuat',
  pg_appearance_standard: 'Standar Penampilan PG',
  visual_merchandising: 'Visual Merchandising',
  visibility_available: 'Visibilitas Tersedia',
  outlet_visibility_description: 'Deskripsi Visibilitas Outlet',
  posm_available: 'POSM Tersedia',
  posm_description: 'Deskripsi POSM',
  merchandise_available: 'Merchandise Tersedia',
  merchandise_description: 'Deskripsi Merchandise',
  promotions_engagement: 'Promosi & Keterlibatan',
  guinness_promotions_available: 'Promosi Guinness Tersedia',
  promotion_description: 'Deskripsi Promosi',
  guinness_promotion_displayed: 'Promosi Guinness Ditampilkan',
  guinness_promotion_displayed_description: 'Deskripsi Promosi Guinness Ditampilkan',
  digital_activity_engagement: 'Keterlibatan Aktivitas Digital',
  digital_activity_engagement_description: 'Deskripsi Keterlibatan Aktivitas Digital',
  issues_notes: 'Masalah / Catatan',
  // quick sales modal
  no_data: 'Tidak ada data',
  personnel: 'Personel',
  assigned_ba: 'BA Ditugaskan',
  assigned_tl: 'TL Ditugaskan',
  outlet_venue: 'Outlet / Venue',
  outlet_id: 'ID Outlet',
  outlet: 'Outlet',
  tier: 'Tingkat',
  date: 'Tanggal',
  restock: 'Restok',
  product_restock: 'Restok Produk',
  restock_description: 'Deskripsi Restok',
  copy_md: 'Salin MD',
  close: 'Tutup',
  // user management / admin
  unknown_user: 'Pengguna Tidak Dikenal',
  current_role: 'Peran Saat Ini',
  created: 'Dibuat',
  success: 'Berhasil',
  access_denied: 'Akses ditolak',
  no_permission: 'Anda tidak memiliki izin untuk melihat halaman ini.',
  edit_user: 'Ubah Pengguna',
  role: 'Peran',
  user: 'Pengguna',
  // audit logs
  audit_logs: 'Log Audit',
  last_7_days: '7 hari terakhir',
  last_30_days: '30 hari terakhir',
  last_90_days: '90 hari terakhir',
  refresh: 'Muat ulang',
  copy_csv: 'Salin CSV',
  all: 'Semua',
  all_actions: 'Semua aksi',
  filter_by_actor: 'Filter berdasarkan aktor (id, nama, atau email)',
  filter_by_docid: 'Filter berdasarkan docId',
  by: 'Oleh',
  changed: 'Diubah',
  load_more: 'Muat lebih banyak',
  admins_only: 'Hanya admin.',
  your_role: 'Peran Anda',
  unknown: 'tidak diketahui',
  copied: 'Disalin',
  copy_failed: 'Gagal menyalin',
  review_for_area_manager: 'Tinjauan untuk Area Manager',
  description: 'Deskripsi',
  personnel_information: 'Informasi Personel',
  assigned_to_ba: 'Ditugaskan ke BA',
  assigned_to_tl: 'Ditugaskan ke TL',
  ba_count: 'Jumlah BA',
  crew_canvasser_count: 'Jumlah Kru Kanvas',
  team_leader_name: 'Nama Team Leader',
  spg_name: 'Nama SPG',
  sales_report_detail_status: 'Status Detail Laporan Penjualan',
  created_at: 'Dibuat Pada',
  created_by: 'Dibuat Oleh',
  outlet_information: 'Informasi Outlet',
  outlet_name: 'Nama Outlet',
  activity_name: 'Nama Aktivitas',
  outlet_venue_name: 'Nama Venue Outlet',
  capacity: 'Kapasitas',
  outlet_event_pic: 'PIC Acara Outlet',
  guinness_selling_data: 'Data Penjualan Guinness',
  sampling_data: 'Data Sampling',
  sampling_available: 'Sampling tersedia',
  call_and_customer_data: 'Data Panggilan dan Pelanggan',
  selling_data_aggregates: 'Data Penjualan (Agregat)',
  guinness_promotional_activities: 'Aktivitas Promosi Guinness',
  visitor_consumer_data: 'Data Pengunjung dan Konsumen',
  tables_data: 'Data Meja',
  competitor_sales: 'Penjualan Pesaing',
  competitor_activity_description: 'Deskripsi Aktivitas Pesaing',
  competitor_activity_spg_total: 'Total SPG Aktivitas Pesaing',
  merchandise_data: 'Data Merchandise',
  merchandise_distributed: 'Merchandise Didistribusikan',
  weather_data: 'Data Cuaca',
  programs_digital_activity: 'Program & Aktivitas Digital',
  bali_specific_data: 'Data Khusus Bali',
  ams_data: 'Data AMS',
  srd_summary_notes_learning: 'Ringkasan Catatan & Pembelajaran Laporan Penjualan',
  copy_all: 'Salin Semua',
  done_by_am: 'Selesai oleh AM',
  program_participation: 'Partisipasi Program',
  call_reach: 'Jangkauan Panggilan',
  packet_sold: 'Paket Terjual',
  engaged_people: 'Orang Terlibat',
  sold: 'Terjual',
  learning_points: 'Poin Pembelajaran',
  weather_status: 'Status Cuaca',
  sunny: 'Cerah',
  cloudy: 'Berawan',
  rainy: 'Hujan',
  // outlets screen additions
  failed_to_fetch_outlets: 'Gagal mengambil data outlet.',
  address: 'Alamat',
  contact: 'Kontak',
  social: 'Sosial',
  coords: 'Koordinat',
  select_channel: 'Pilih Kanal',
  select_tier: 'Pilih Tingkat',
  complete_address: 'Alamat Lengkap',
  contact_number: 'Nomor Kontak',
  pic_name: 'Nama PIC',
  pic_contact_number: 'Nomor Kontak PIC',
  social_media: 'Media Sosial',
  capacity_person: 'Kapasitas (Orang)',
  tables_available: 'Jumlah Meja Tersedia (meja)',
  get_current_location: 'Dapatkan Lokasi Saat Ini',
  latitude: 'Lintang',
  longitude: 'Bujur',
  regency: 'Kabupaten',
  select_province: 'Pilih Provinsi',
  select_city_regency: 'Pilih Kota/Kabupaten',
  failed_to_fetch_cities: 'Gagal mengambil data kota.',
  cities_cleared: 'Semua kota telah dihapus.',
  failed_to_clear_cities: 'Gagal menghapus kota.',
  already_populated: 'Sudah Terisi',
  cities_already_populated: 'Koleksi kota sudah berisi data.',
  cities_populated: 'Semua kota dan kabupaten telah ditambahkan ke database.',
  failed_to_populate_cities: 'Gagal mengisi kota.',
  no_cities_for_province: 'Tidak ada kota untuk provinsi ini.',
  select_province_to_view_cities: 'Pilih provinsi untuk melihat daftar kota.',
  invalid_name: 'Nama Tidak Valid',
  cannot_be_empty: 'tidak boleh kosong.',
  failed_to_add_province: 'Gagal menambah provinsi.',
  // auth/login/signup
  missing_info: 'Data Kurang',
  enter_email_password: 'Masukkan email dan kata sandi.',
  login_failed: 'Gagal Masuk',
  welcome_back: 'Selamat Datang Kembali',
  sign_in_continue: 'Masuk untuk melanjutkan',
  password: 'Kata Sandi',
  password_placeholder: '••••••••',
  login: 'Masuk',
  no_account: 'Belum punya akun?',
  sign_up: 'Daftar',
  create_account: 'BUAT AKUN',
  get_started: 'Mulai',
  fill_information_below: 'Isi informasi di bawah',
  first_name_placeholder: 'Budi',
  last_name_placeholder: 'Santoso',
  phone_indonesia: 'Telepon (Indonesia)',
  phone_placeholder: '81234567890',
  phone_format_hint: 'Format: +6281234567890',
  create_password: 'Buat kata sandi',
  repeat_password: 'Ulangi kata sandi',
  passwords_do_not_match: 'Kata sandi tidak cocok',
  missing_fields: 'Kolom Wajib',
  first_last_phone_required: 'Nama Depan, Nama Belakang, dan Telepon wajib diisi.',
  password_required: 'Kata Sandi Wajib',
  enter_password: 'Masukkan kata sandi.',
  enter_valid_phone: 'Masukkan nomor telepon Indonesia yang valid, mis. 81234567890',
  signup_failed: 'Gagal Daftar',
  failed_create_user_data: 'Gagal membuat data pengguna.',
  create_account_cta: 'Buat Akun',
  already_have_account: 'Sudah punya akun?',
  // not found
  oops: 'Ups!',
  screen_not_exist: 'Layar ini tidak ada.',
  go_home: 'Kembali ke beranda!'
  ,
  // about/updates
  app_version: 'Versi Aplikasi',
  build: 'Build',
  channel: 'Kanal',
  runtime: 'Runtime',
  update_id: 'ID Pembaruan',
  unable_open_link: 'Tidak dapat membuka tautan',
  update_ready: 'Pembaruan Siap',
  app_reload_apply: 'Aplikasi akan dimuat ulang untuk menerapkan pembaruan.',
  reload: 'Muat Ulang',
  up_to_date: 'Sudah terbaru',
  latest_version: 'Anda sudah versi terbaru.',
  update_check_failed: 'Gagal Memeriksa Pembaruan',
  // team management
  team_management: 'Manajemen Tim',
  name: 'Nama',
  no_team_members: 'Tidak ada anggota tim.',
  // added keys for modals and admin flows
  admin_next_status: 'Admin: Status Berikutnya',
  no_change: '(tanpa perubahan)',
  quiz_results: 'Hasil Kuis',
  question_x_of_y: 'Pertanyaan {x} dari {y}',
  quiz_complete: 'Kuis Selesai!',
  your_score: 'Skor Anda',
  quiz_questions: 'Pertanyaan Kuis',
  quiz_question: 'Pertanyaan Kuis',
  question: 'Pertanyaan',
  option: 'Opsi',
  answer: 'Jawaban',
  answer_abcd: 'Jawaban (A/B/C/D)',
  result: 'Hasil',
  task_id: 'ID Tugas',
  quiz_label: 'Kuis',
  user_id: 'ID Pengguna',
  quiz_id: 'ID Kuis',
  quiz_date_hint: 'Tanggal Kuis (YYYY-MM-DD)',
  quick_quiz_result: 'Hasil Kuis',
  add_quiz_record: 'Tambah Catatan Kuis',
  edit_quiz_record: 'Edit Catatan Kuis',
  status_admin: 'Status (Admin)',
  qr_status: 'Status Task Quick Sales Report',
  restock_information: 'Informasi Restok',
  product_restock_question: 'Restok Produk?',
  qr_review_by_am: 'QR Review oleh AM',
  confirm_qr_review_by_am: 'Konfirmasi QR Review oleh AM',
  status_updated_to_qr_review_by_am: 'Status diperbarui ke QR Review oleh AM.',
  review_back_to_tl: 'Kembalikan ke TL',
  status_updated_to_review_back_to_tl: 'Status diperbarui ke Kembali ke TL.',
  reassess_by_tl: 'REASSESS oleh TL',
  confirm_reassess: 'Konfirmasi Penilaian Ulang',
  confirm_reassess_msg: 'Tugaskan ulang ke TL? Status akan diubah ke RE ASSESS BY TL.',
  status_updated_to_reassess_tl: 'Status diperbarui ke RE ASSESS BY TL.'
  },
};

type Ctx = {
  locale: Locale;
  setLocale: (l: Locale) => void;
  t: (k: string) => string;
};

const I18nCtx = createContext<Ctx | undefined>(undefined);
const STORAGE_KEY = 'i18n.locale';

export function I18nProvider({ children }: { children: React.ReactNode }) {
  const [locale, setLocaleState] = useState<Locale>('en');

  useEffect(() => {
    (async () => {
      try {
        const saved = await AsyncStorage.getItem(STORAGE_KEY);
        if (saved === 'en' || saved === 'id') setLocaleState(saved);
      } catch {}
    })();
  }, []);

  const setLocale = (l: Locale) => {
    setLocaleState(l);
    AsyncStorage.setItem(STORAGE_KEY, l).catch(() => {});
  };

  const t = (k: string) => (resources[locale] && resources[locale][k]) || resources.en[k] || k;
  const value = useMemo(() => ({ locale, setLocale, t }), [locale]);
  return <I18nCtx.Provider value={value}>{children}</I18nCtx.Provider>;
}

export function useI18n() {
  const ctx = useContext(I18nCtx);
  if (!ctx) throw new Error('useI18n must be used within I18nProvider');
  return ctx;
}
